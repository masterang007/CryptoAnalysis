<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Market Cycle Diagnostic Tool ü©∫</title>
    
    <!-- APP ICON & MANIFEST SETTINGS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CycleDiag">
    
    <!-- FIXED ICON: iOS requires PNG (Not SVG) -->
    <!-- Using a high-quality 3D Bullish Chart Icon -->
    <link rel="apple-touch-icon" href="https://img.icons8.com/fluency/512/bullish.png">
    <link rel="icon" type="image/png" href="https://img.icons8.com/fluency/96/bullish.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { background-color: #0f172a; color: #e2e8f0; font-family: 'Inter', sans-serif; padding-bottom: 80px; padding-top: env(safe-area-inset-top); }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Card Styling */
        .card { background-color: #1e293b; border-radius: 12px; padding: 16px; border: 1px solid #334155; position: relative; overflow: hidden; transition: all 0.2s; }
        .card:hover { border-color: #475569; }

        /* Diagnostic Buttons */
        .diag-btn {
            width: 100%; padding: 10px; border-radius: 8px; font-size: 0.8rem; font-weight: 600;
            border: 2px solid #334155; background: #0f172a; color: #94a3b8; transition: all 0.2s;
            text-align: center; cursor: pointer; margin-bottom: 5px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .diag-btn:hover { background: #1e293b; border-color: #475569; }
        
        /* Active States */
        .diag-btn.active-buy { background: #172554; border-color: #3b82f6; color: #60a5fa; } 
        .diag-btn.active-sell { background: #450a0a; border-color: #ef4444; color: #fca5a5; } 
        .diag-btn.active-neutral { background: #374151; border-color: #9ca3af; color: #e5e7eb; }

        /* Tab Buttons for Watchlist */
        .tab-btn {
            background: #334155; color: #94a3b8; padding: 6px 14px; border-radius: 20px; font-size: 0.75rem; font-weight: bold; cursor: pointer; transition: 0.2s; border: none;
        }
        .tab-btn:hover { background: #475569; color: white; }
        .tab-btn.active-tab { background: #3b82f6; color: white; box-shadow: 0 2px 10px rgba(59, 130, 246, 0.4); }

        /* Status Output Area */
        .status-output { background: #020617; border-left: 4px solid #64748b; }
        .status-output.phase-btc { border-color: #f59e0b; }
        .status-output.phase-alt { border-color: #22c55e; box-shadow: 0 0 20px rgba(34, 197, 94, 0.1); }
        .status-output.phase-acc { border-color: #3b82f6; }

        /* Motivation Banner */
        .quote-banner {
            background: linear-gradient(90deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid #fbbf24; /* Gold border for wealth */
            color: #fbbf24;
        }

        /* Utils */
        .gauge-frame { 
            height: 300px; 
            margin-top: 0px; 
            overflow: hidden;
            display: flex; justify-content: center; align-items: flex-start;
        }
        .gauge-scaler { width: 100%; height: 100%; transform: scale(0.95); transform-origin: top center; }

        /* Crypto Bubbles Fix */
        .bubble-wrapper { 
            position: relative; height: 600px; width: 100%; background: #000; border-radius: 12px; overflow: hidden; 
        }
        .bubble-iframe { 
            width: 100%; height: 100%; border: none; 
        }
        
        .launch-btn {
            pointer-events: auto; background: #3b82f6; color: white; padding: 8px 16px; border-radius: 6px;
            font-weight: bold; text-decoration: none; transition: transform 0.2s; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.5); font-size: 0.8rem;
        }
        .launch-btn:hover { transform: scale(1.05); background: #2563eb; }

        /* Exit Tracker Styles */
        .exit-input {
            background: #0f172a; border: 1px solid #334155; color: white; 
            padding: 4px 8px; border-radius: 4px; width: 60px; text-align: center; font-size: 0.8rem;
        }
        .exit-alarm { animation: flashRed 1s infinite; }
        @keyframes flashRed { 0% { background-color: #1e293b; } 50% { background-color: #450a0a; } 100% { background-color: #1e293b; } }
    </style>
</head>
<body class="max-w-[1600px] mx-auto p-4">

    <!-- HEADER -->
    <header class="flex flex-col md:flex-row justify-between items-end mb-6 border-b border-slate-800 pb-6">
        <div>
            <h1 class="text-3xl font-extrabold text-white tracking-tight">Market Diagnostic <span class="text-blue-500">Terminal</span></h1>
            <p class="text-slate-400 text-sm mt-1">Match the buttons to the gauges to see the real market phase.</p>
        </div>
        <div class="flex gap-2 mt-4 md:mt-0">
            <button onclick="resetDiagnostic()" class="text-xs text-slate-500 hover:text-white underline">Reset All</button>
        </div>
    </header>

    <!-- DAILY MOTIVATION QUOTE -->
    <div class="quote-banner rounded-lg p-4 mb-8 flex items-center justify-center shadow-lg animate-pulse-slow">
        <div class="text-center">
            <span class="text-xs uppercase tracking-widest opacity-70 mb-1 block">Daily HODL Wisdom</span>
            <p id="motivation-quote" class="text-lg font-bold italic">"Loading wisdom..."</p>
        </div>
    </div>

    <!-- MAIN GRID: DIAGNOSTIC TOOLS -->
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-12">
        
        <!-- MODULE 1: BTC DOMINANCE + EXIT TRACKER -->
        <div class="card border-t-4 border-orange-500 flex flex-col h-full" id="btc-card">
            <div class="flex justify-between items-start">
                <h3 class="font-bold text-white">1. BTC Dominance</h3>
                <span class="text-[10px] bg-slate-700 px-2 py-1 rounded text-slate-300">DRIVER</span>
            </div>
            
            <!-- Gauge -->
            <div class="gauge-frame"><div class="gauge-scaler">
                <div class="tradingview-widget-container">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                    { "interval": "1D", "width": "100%", "isTransparent": true, "height": "100%", "symbol": "CRYPTOCAP:BTC.D", "showIntervalTabs": false, "displayMode": "single", "locale": "en", "colorTheme": "dark" }
                    </script>
                </div>
            </div></div>
            
            <!-- NEW: EXIT TRACKER -->
            <div class="bg-slate-800 rounded p-3 mb-4 border border-slate-700">
                <div class="flex justify-between items-center mb-2">
                    <label class="text-[10px] text-slate-400 uppercase font-bold">Current %</label>
                    <label class="text-[10px] text-slate-400 uppercase font-bold">Target %</label>
                </div>
                <div class="flex justify-between items-center gap-2 mb-2">
                    <input type="number" id="btc-current" class="exit-input" placeholder="58.5" oninput="checkExitStatus()">
                    <span class="text-slate-500 text-xs">‚ûú</span>
                    <input type="number" id="btc-target" class="exit-input border-orange-500" value="45" oninput="checkExitStatus()">
                </div>
                <div id="exit-message" class="text-xs text-center font-bold text-slate-400">Enter Current Value</div>
            </div>

            <!-- Buttons -->
            <p class="text-[10px] text-slate-500 mb-2 font-mono uppercase text-center">WHERE IS THE NEEDLE?</p>
            <div class="flex flex-col gap-1 mt-auto">
                <button class="diag-btn" id="btn-btc-sell" onclick="setSignal('btc', 'bear')">
                    <span>Gauge: <strong>SELL</strong></span><span class="text-xs text-slate-500">üìâ</span>
                </button>
                <button class="diag-btn" id="btn-btc-neutral" onclick="setSignal('btc', 'neutral')">
                    <span>Gauge: <strong>NEUTRAL</strong></span><span class="text-xs text-slate-500">üòê</span>
                </button>
                <button class="diag-btn" id="btn-btc-buy" onclick="setSignal('btc', 'bull')">
                    <span>Gauge: <strong>BUY</strong></span><span class="text-xs text-slate-500">üìà</span>
                </button>
            </div>
        </div>

        <!-- MODULE 2: MONEY FLOW -->
        <div class="card border-t-4 border-green-500 flex flex-col h-full">
            <div class="flex justify-between items-start">
                <h3 class="font-bold text-white">2. Altcoin Money</h3>
                <span class="text-[10px] bg-slate-700 px-2 py-1 rounded text-slate-300">VOLUME</span>
            </div>
            <div class="gauge-frame"><div class="gauge-scaler">
                <div class="tradingview-widget-container">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                    { "interval": "1D", "width": "100%", "isTransparent": true, "height": "100%", "symbol": "CRYPTOCAP:TOTAL2", "showIntervalTabs": false, "displayMode": "single", "locale": "en", "colorTheme": "dark" }
                    </script>
                </div>
            </div></div>
            <p class="text-[10px] text-slate-500 mb-2 font-mono uppercase text-center mt-auto">WHERE IS THE NEEDLE?</p>
            <div class="flex flex-col gap-1">
                <button class="diag-btn" id="btn-money-buy" onclick="setSignal('money', 'bull')">
                    <span>Gauge: <strong>BUY</strong></span><span class="text-xs text-slate-500">üìà</span>
                </button>
                <button class="diag-btn" id="btn-money-neutral" onclick="setSignal('money', 'neutral')">
                    <span>Gauge: <strong>NEUTRAL</strong></span><span class="text-xs text-slate-500">üòê</span>
                </button>
                <button class="diag-btn" id="btn-money-sell" onclick="setSignal('money', 'bear')">
                    <span>Gauge: <strong>SELL</strong></span><span class="text-xs text-slate-500">üìâ</span>
                </button>
            </div>
        </div>

        <!-- MODULE 3: ROTATION -->
        <div class="card border-t-4 border-purple-500 flex flex-col h-full">
            <div class="flex justify-between items-start">
                <h3 class="font-bold text-white">3. ETH Strength</h3>
                <span class="text-[10px] bg-slate-700 px-2 py-1 rounded text-slate-300">ROTATION</span>
            </div>
            <div class="gauge-frame"><div class="gauge-scaler">
                <div class="tradingview-widget-container">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                    { "interval": "1D", "width": "100%", "isTransparent": true, "height": "100%", "symbol": "BINANCE:ETHBTC", "showIntervalTabs": false, "displayMode": "single", "locale": "en", "colorTheme": "dark" }
                    </script>
                </div>
            </div></div>
            <p class="text-[10px] text-slate-500 mb-2 font-mono uppercase text-center mt-auto">WHERE IS THE NEEDLE?</p>
            <div class="flex flex-col gap-1">
                <button class="diag-btn" id="btn-eth-buy" onclick="setSignal('eth', 'bull')">
                    <span>Gauge: <strong>BUY</strong></span><span class="text-xs text-slate-500">üìà</span>
                </button>
                <button class="diag-btn" id="btn-eth-neutral" onclick="setSignal('eth', 'neutral')">
                    <span>Gauge: <strong>NEUTRAL</strong></span><span class="text-xs text-slate-500">üòê</span>
                </button>
                <button class="diag-btn" id="btn-eth-sell" onclick="setSignal('eth', 'bear')">
                    <span>Gauge: <strong>SELL</strong></span><span class="text-xs text-slate-500">üìâ</span>
                </button>
            </div>
        </div>

        <!-- MODULE 4: THE RESULT (CALCULATOR) -->
        <div class="card status-output flex flex-col justify-center p-6" id="result-card">
            <h2 class="text-slate-500 text-xs uppercase tracking-widest mb-2">DIAGNOSIS RESULT</h2>
            <div id="status-title" class="text-3xl font-extrabold text-slate-600 mb-2">WAITING...</div>
            <p id="status-desc" class="text-sm text-slate-400">Match the buttons to the gauges to calculate the market phase.</p>
            
            <div class="mt-auto pt-6 border-t border-slate-800">
                <div class="flex justify-between text-xs text-slate-500 mb-1">
                    <span>Confidence</span>
                    <span id="confidence-score">0%</span>
                </div>
                <div class="w-full h-2 bg-slate-800 rounded-full overflow-hidden">
                    <div id="confidence-bar" class="h-full w-0 bg-slate-600 transition-all duration-500"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- VISUALIZERS: BUBBLES (FULL) & SWITCHABLE LIST -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12">
        <!-- CRYPTO BUBBLES -->
        <div class="card col-span-1 lg:col-span-2 p-0 bg-black h-[600px] relative">
            <div class="bubble-wrapper">
                <iframe src="https://cryptobubbles.net" class="bubble-iframe" title="Crypto Bubbles"></iframe>
                <div class="absolute bottom-4 right-4 z-50">
                     <a href="https://cryptobubbles.net" target="_blank" class="launch-btn flex items-center gap-2">
                        <span>‚õ∂ Open Fullscreen</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- DYNAMIC WATCHLIST WITH SECTOR SWITCHER -->
        <div class="card p-0 bg-[#131722] flex flex-col h-[600px]">
             <div class="p-4 border-b border-slate-800">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold text-white" id="list-title">üî• Sentiment Leaders</h3>
                </div>
                <!-- SECTOR BUTTONS -->
                <div class="flex gap-2 flex-wrap">
                    <button class="tab-btn active-tab" onclick="loadWatchlist('sentiment', this)">Sentiment</button>
                    <button class="tab-btn" onclick="loadWatchlist('memes', this)">Memes</button>
                    <button class="tab-btn" onclick="loadWatchlist('ai', this)">AI</button>
                    <button class="tab-btn" onclick="loadWatchlist('gaming', this)">Gaming</button>
                </div>
            </div>
            <div class="flex-1 relative" id="watchlist-container">
                <!-- Widget Injected Here via JS -->
            </div>
        </div>
    </div>
    
    <!-- TOTAL3 & FEAR/GREED -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- TOTAL3 -->
        <div class="card lg:col-span-2 h-[600px] p-0 bg-[#131722]">
             <div class="p-4 border-b border-slate-800 flex justify-between items-center">
                <h3 class="font-bold text-white">üí∞ TOTAL3 (Real Altcoin Market Cap)</h3>
                <span class="text-[10px] bg-green-900 text-green-200 px-2 py-1 rounded">Excl. BTC & ETH</span>
            </div>
            <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                {
                "width": "100%", "height": "100%", "symbol": "CRYPTOCAP:TOTAL3", "interval": "D", "timezone": "Etc/UTC", "theme": "dark", "style": "1", "locale": "en", "enable_publishing": false, "hide_top_toolbar": false, "hide_legend": false, "save_image": false, "calendar": false, "hide_volume": true, "support_host": "https://www.tradingview.com"
                }
                </script>
            </div>
        </div>

        <!-- FEAR & GREED + MARKET CAP -->
        <div class="flex flex-col gap-6">
            <!-- Live Fear & Greed -->
            <div class="card flex flex-col items-center justify-center bg-slate-900 border-slate-700">
                <div class="w-full flex justify-between items-center mb-4">
                    <h3 class="font-bold text-white">üò® Fear & Greed</h3>
                    <span id="fng-value" class="text-xs font-bold bg-slate-700 text-slate-300 px-2 py-1 rounded animate-pulse">Loading...</span>
                </div>
                <img src="https://alternative.me/crypto/fear-and-greed-index.png" alt="Latest Crypto Fear & Greed Index" class="w-full rounded-lg shadow-lg">
            </div>

            <div class="card bg-slate-900 border-slate-700 flex-1">
                 <div class="w-full flex justify-between items-center mb-2">
                    <h3 class="font-bold text-white">üìä Market Cap</h3>
                </div>
                <div class="tradingview-widget-container">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                    { "symbol": "CRYPTOCAP:TOTAL", "width": "100%", "height": "100%", "locale": "en", "dateRange": "1M", "colorTheme": "dark", "isTransparent": true, "autosize": true, "largeChartUrl": "" }
                    </script>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="mt-12 border-t border-slate-800 pt-6 text-center">
        <p class="text-slate-500 text-sm font-mono">
            Tool built by <span class="text-blue-400 font-bold">ezham aka Am0x</span> üöÄ
        </p>
    </footer>

    <script>
        // --- 0. HODL QUOTES ---
        const quotes = [
            "Time in the market beats timing the market.",
            "Diamond hands are forged in the dip. üíéüôå",
            "When in doubt, zoom out. üî≠",
            "The stock market is a device for transferring money from the impatient to the patient. - Warren Buffett",
            "HODL: Hold On for Dear Life. üöÄ",
            "Volatility is the price you pay for performance.",
            "You only lose if you sell low.",
            "Generational wealth requires generational patience.",
            "Bear markets make you rich, bull markets make you money.",
            "Stay humble, stack sats.",
            "Buying the dip is easy. Holding the rally is hard."
        ];

        // --- 1. APP STATE & PERSISTENCE ---
        let state = { btc: null, money: null, eth: null };

        window.onload = function() {
            // Load State
            const savedState = localStorage.getItem('marketDiagnosticState');
            if (savedState) {
                state = JSON.parse(savedState);
                restoreUI();
            }
            
            // Load Target from Memory
            const savedTarget = localStorage.getItem('btcTargetVal');
            if(savedTarget) document.getElementById('btc-target').value = savedTarget;

            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('motivation-quote').innerText = `"${randomQuote}"`;
            
            loadWatchlist('sentiment', document.querySelector('.tab-btn'));
            fetchFearGreed();
        };

        // --- 2. EXIT TRACKER LOGIC ---
        function checkExitStatus() {
            const current = parseFloat(document.getElementById('btc-current').value);
            const target = parseFloat(document.getElementById('btc-target').value);
            const msg = document.getElementById('exit-message');
            const card = document.getElementById('btc-card');
            
            if(!current || !target) return;

            // Save Target preference
            localStorage.setItem('btcTargetVal', target);

            // Distance Calculation (BTC.D drops to trigger altseason)
            const distance = (current - target).toFixed(2);

            if (current <= target) {
                msg.innerHTML = "üö® <span class='text-red-500 font-extrabold'>EXIT MARKET NOW!</span> üö®";
                card.classList.add('exit-alarm'); // Flash Red
            } else {
                msg.innerHTML = `Distance to Target: <span class='text-blue-400'>${distance}%</span>`;
                card.classList.remove('exit-alarm');
            }
        }

        // --- 3. DIAGNOSTIC LOGIC ---
        function setSignal(type, value) {
            state[type] = value;
            localStorage.setItem('marketDiagnosticState', JSON.stringify(state)); 
            updateButtons(type, value);
            calculateStatus();
        }

        function updateButtons(type, value) {
            // Remove all actives
            document.getElementById(`btn-${type}-buy`).classList.remove('active-buy');
            document.getElementById(`btn-${type}-sell`).classList.remove('active-sell');
            document.getElementById(`btn-${type}-neutral`).classList.remove('active-neutral');
            
            // Add correct active
            if(value === 'bull') document.getElementById(`btn-${type}-buy`).classList.add('active-buy');
            if(value === 'bear') document.getElementById(`btn-${type}-sell`).classList.add('active-sell');
            if(value === 'neutral') document.getElementById(`btn-${type}-neutral`).classList.add('active-neutral');
        }

        function restoreUI() {
            if(state.btc) updateButtons('btc', state.btc);
            if(state.money) updateButtons('money', state.money);
            if(state.eth) updateButtons('eth', state.eth);
            calculateStatus();
        }

        // --- 2. LOGIC ENGINE (UPDATED FOR NEUTRAL) ---
        function calculateStatus() {
            const resultCard = document.getElementById('result-card');
            const title = document.getElementById('status-title');
            const desc = document.getElementById('status-desc');
            resultCard.className = "card status-output flex flex-col justify-center p-6"; 

            if (!state.btc || !state.money || !state.eth) return; 

            // 1. BTC Dominance is BUY (Rising) -> Bitcoin Season
            if (state.btc === 'bull') {
                title.innerText = "BITCOIN SEASON üêª";
                title.className = "text-3xl font-extrabold text-orange-500 mb-2";
                desc.innerText = "Dominance is rising. Alts will likely bleed or stall.";
                resultCard.classList.add('phase-btc');
                setConfidence(90, 'bg-orange-500');
                return;
            }

            // 2. All Green -> ALTSEASON
            if (state.btc === 'bear' && state.money === 'bull' && state.eth === 'bull') {
                title.innerText = "ALTSEASON IS GO üöÄ";
                title.className = "text-3xl font-extrabold text-green-400 mb-2 animate-pulse";
                desc.innerText = "Dominance Falling + Money In + Rotation Active.";
                resultCard.classList.add('phase-alt');
                setConfidence(100, 'bg-green-500');
                return;
            }

            // 3. Accumulation (Mixed Signals)
            if (state.money === 'bull' && (state.eth === 'neutral' || state.eth === 'bear')) {
                title.innerText = "ACCUMULATION üèóÔ∏è";
                title.className = "text-3xl font-extrabold text-blue-400 mb-2";
                desc.innerText = "Money is entering, but rotation is weak. Pre-pump.";
                resultCard.classList.add('phase-acc');
                setConfidence(75, 'bg-blue-500');
                return;
            }

            // 4. Neutral/Chop
            if (state.money === 'neutral' || state.money === 'bear') {
                title.innerText = "MARKET CHOP ü¶Ä";
                title.className = "text-3xl font-extrabold text-slate-400 mb-2";
                desc.innerText = "Money flow is weak or flat. Risk Off.";
                setConfidence(50, 'bg-slate-500');
                return;
            }
            
            // Default Fallback
            title.innerText = "OBSERVING üëÄ";
            title.className = "text-3xl font-extrabold text-slate-500 mb-2";
            desc.innerText = "Signals are mixed. Wait for confirmation.";
            setConfidence(50, 'bg-slate-500');
        }

        function setConfidence(percent, colorClass) {
            document.getElementById('confidence-bar').className = `h-full w-0 ${colorClass} transition-all duration-500`;
            setTimeout(() => { document.getElementById('confidence-bar').style.width = percent + "%"; }, 100);
            document.getElementById('confidence-score').innerText = percent + "%";
        }

        function resetDiagnostic() {
            state = { btc: null, money: null, eth: null };
            localStorage.removeItem('marketDiagnosticState');
            document.querySelectorAll('.diag-btn').forEach(btn => {
                btn.classList.remove('active-buy', 'active-sell', 'active-neutral');
            });
            document.getElementById('status-title').innerText = "WAITING...";
            document.getElementById('status-title').className = "text-3xl font-extrabold text-slate-600 mb-2";
            document.getElementById('status-desc').innerText = "Match the buttons to the gauges to calculate the market phase.";
            document.getElementById('confidence-bar').style.width = "0%";
        }

        // --- 3. WATCHLIST SWITCHER ---
        const watchlists = {
            sentiment: [
                { "s": "BINANCE:XRPUSDT", "d": "1. XRP (Breakout)" },
                { "s": "BINANCE:SUIUSDT", "d": "2. SUI (Momentum)" },
                { "s": "BINANCE:DOGEUSDT", "d": "3. DOGE (Meme)" },
                { "s": "BINANCE:FETUSDT", "d": "4. FET (AI)" },
                { "s": "BINANCE:RENDERUSDT", "d": "5. RENDER (DePin)" }
            ],
            memes: [
                { "s": "BINANCE:DOGEUSDT", "d": "DOGE" },
                { "s": "BINANCE:PEPEUSDT", "d": "PEPE" },
                { "s": "BINANCE:WIFUSDT", "d": "WIF" },
                { "s": "BINANCE:FLOKIUSDT", "d": "FLOKI" },
                { "s": "BINANCE:BONKUSDT", "d": "BONK" }
            ],
            ai: [
                { "s": "BINANCE:FETUSDT", "d": "FET" },
                { "s": "BINANCE:RENDERUSDT", "d": "RENDER" },
                { "s": "BINANCE:TAOUSDT", "d": "TAO" },
                { "s": "BINANCE:NEARUSDT", "d": "NEAR" },
                { "s": "BINANCE:GRTUSDT", "d": "GRT" }
            ],
            gaming: [
                { "s": "BINANCE:IMXUSDT", "d": "IMX" },
                { "s": "BINANCE:BEAMXUSDT", "d": "BEAM" },
                { "s": "BINANCE:GALAUSDT", "d": "GALA" },
                { "s": "BINANCE:SANDUSDT", "d": "SAND" },
                { "s": "BINANCE:AXSUSDT", "d": "AXS" }
            ]
        };

        function loadWatchlist(key, btnElement) {
            document.getElementById('list-title').innerText = "üî• " + key.charAt(0).toUpperCase() + key.slice(1) + " Leaders";
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active-tab'));
            if(btnElement) btnElement.classList.add('active-tab');
            const container = document.getElementById('watchlist-container');
            container.innerHTML = ''; 
            const div = document.createElement('div');
            div.className = 'tradingview-widget-container';
            div.innerHTML = `<div class="tradingview-widget-container__widget"></div>`;
            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js';
            script.async = true;
            script.innerHTML = JSON.stringify({
                "colorTheme": "dark", "dateRange": "12M", "showChart": true, "locale": "en",
                "largeChartUrl": "", "isTransparent": true, "showSymbolLogo": true,
                "width": "100%", "height": "100%", 
                "tabs": [ { "title": "List", "symbols": watchlists[key] } ]
            });
            div.appendChild(script);
            container.appendChild(div);
        }

        async function fetchFearGreed() {
            try {
                const res = await fetch('https://api.alternative.me/fng/');
                const data = await res.json();
                const val = data.data[0].value;
                const text = data.data[0].value_classification;
                const el = document.getElementById('fng-value');
                el.innerText = `${text}: ${val}`;
                el.classList.remove('animate-pulse');
                if(val < 25) { el.className = "text-xs font-bold bg-red-900 text-red-200 px-2 py-1 rounded"; }
                else if(val > 75) { el.className = "text-xs font-bold bg-green-900 text-green-200 px-2 py-1 rounded"; }
                else { el.className = "text-xs font-bold bg-slate-700 text-slate-300 px-2 py-1 rounded"; }
            } catch(e) {
                console.log("F&G API Error");
                document.getElementById('fng-value').innerText = "API Error";
            }
        }
    </script>
</body>
</html>
